(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e0ea71c"],{"26ff":function(t,e,a){},"628a":function(t,e,a){"use strict";a("26ff")},b0c0:function(t,e,a){var n=a("83ab"),r=a("5e77").EXISTS,s=a("e330"),o=a("9bf2").f,i=Function.prototype,m=s(i.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,p=s(c.exec),d="name";n&&!r&&o(i,d,{configurable:!0,get:function(){try{return p(c,m(this))[1]}catch(t){return""}}})},b19b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tag",{staticClass:"my-tag",attrs:{effect:"dark"}},[a("svg",{staticStyle:{"vertical-align":"-3px"},attrs:{viewBox:"0 0 1024 1024",width:"20",height:"20"}},[a("path",{attrs:{d:"M0 0h1024v1024H0V0z",fill:"#202425",opacity:".01"}}),a("path",{attrs:{d:"M682.666667 204.8h238.933333a34.133333 34.133333 0 0 1 34.133333 34.133333v648.533334a68.266667 68.266667 0 0 1-68.266666 68.266666h-204.8V204.8z",fill:"#FFAA44"}}),a("path",{attrs:{d:"M68.266667 921.6a34.133333 34.133333 0 0 0 34.133333 34.133333h785.066667a68.266667 68.266667 0 0 1-68.266667-68.266666V102.4a34.133333 34.133333 0 0 0-34.133333-34.133333H102.4a34.133333 34.133333 0 0 0-34.133333 34.133333v819.2z",fill:"#11AA66"}}),a("path",{attrs:{d:"M238.933333 307.2a34.133333 34.133333 0 0 0 0 68.266667h136.533334a34.133333 34.133333 0 1 0 0-68.266667H238.933333z m0 204.8a34.133333 34.133333 0 1 0 0 68.266667h409.6a34.133333 34.133333 0 1 0 0-68.266667H238.933333z m0 204.8a34.133333 34.133333 0 1 0 0 68.266667h204.8a34.133333 34.133333 0 1 0 0-68.266667H238.933333z",fill:"#FFFFFF"}})]),t._v(" 文章信息 ")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.department,rules:t.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"名称",prop:"departmentTitle"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:t.department.departmentTitle,callback:function(e){t.$set(t.department,"departmentTitle",e)},expression:"department.departmentTitle"}})],1),a("el-form-item",{attrs:{label:"介绍",prop:"departmentContent"}},[a("mavon-editor",{ref:"md",on:{imgAdd:t.imgAdd},model:{value:t.department.departmentContent,callback:function(e){t.$set(t.department,"departmentContent",e)},expression:"department.departmentContent"}})],1),a("el-form-item",{attrs:{label:"是否启用评论",prop:"commentStatus"}},[a("el-tag",{attrs:{type:!1===t.department.commentStatus?"danger":"success","disable-transitions":""}},[t._v(" "+t._s(!1===t.department.commentStatus?"否":"是")+" ")]),a("el-switch",{model:{value:t.department.commentStatus,callback:function(e){t.$set(t.department,"commentStatus",e)},expression:"department.commentStatus"}})],1),a("el-form-item",{attrs:{label:"是否推荐",prop:"recommendStatus"}},[a("el-tag",{attrs:{type:!1===t.department.recommendStatus?"danger":"success","disable-transitions":""}},[t._v(" "+t._s(!1===t.department.recommendStatus?"否":"是")+" ")]),a("el-switch",{model:{value:t.department.recommendStatus,callback:function(e){t.$set(t.department,"recommendStatus",e)},expression:"department.recommendStatus"}})],1),a("el-form-item",{attrs:{label:"是否可见",prop:"viewStatus"}},[a("el-tag",{attrs:{type:!1===t.department.viewStatus?"danger":"success","disable-transitions":""}},[t._v(" "+t._s(!1===t.department.viewStatus?"否":"是")+" ")]),a("el-switch",{model:{value:t.department.viewStatus,callback:function(e){t.$set(t.department,"viewStatus",e)},expression:"department.viewStatus"}})],1),!1===t.department.viewStatus?a("el-form-item",{attrs:{label:"不可见时的访问密码",prop:"password"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:t.department.password,callback:function(e){t.$set(t.department,"password",e)},expression:"department.password"}})],1):t._e(),!1===t.department.viewStatus?a("el-form-item",{attrs:{label:"密码提示",prop:"tips"}},[a("el-input",{attrs:{maxlength:"60"},model:{value:t.department.tips,callback:function(e){t.$set(t.department,"tips",e)},expression:"department.tips"}})],1):t._e(),a("el-form-item",{attrs:{label:"公司",prop:"corporationId"}},[a("el-select",{attrs:{placeholder:"请选择公司"},model:{value:t.department.corporationId,callback:function(e){t.$set(t.department,"corporationId",e)},expression:"department.corporationId"}},t._l(t.corporations,(function(t){return a("el-option",{key:t.id,attrs:{label:t.corporationTitle,value:t.id}})})),1)],1)],1),a("div",{staticClass:"myCenter",staticStyle:{"margin-bottom":"22px"}},[this.$common.isEmpty(this.id)?t._e():a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"danger"},on:{click:function(e){return t.deleteForm("ruleForm")}}},[t._v("删除文章")]),a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置所有修改")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)},r=[],s=(a("b0c0"),a("ac1f"),a("5319"),{components:{},data:function(){return{id:this.$route.query.id,department:{departmentTitle:"",departmentContent:"",commentStatus:!0,recommendStatus:!1,viewStatus:!0,password:"",tips:"",corporationId:""},corporations:[],rules:{departmentTitle:[{required:!0,message:"请输入名称",trigger:"change"}],departmentContent:[{required:!0,message:"请输入内容",trigger:"change"}],commentStatus:[{required:!0,message:"是否启用评论",trigger:"change"}],recommendStatus:[{required:!0,message:"是否推荐",trigger:"change"}],viewStatus:[{required:!0,message:"是否可见",trigger:"change"}],corporationId:[{required:!0,message:"公司",trigger:"change"}]}}},created:function(){this.getCorporations()},mounted:function(){},methods:{imgAdd:function(t,e){var a="";-1!==e.name.lastIndexOf(".")&&(a=e.name.substring(e.name.lastIndexOf(".")));var n="departmentPicture/"+this.$store.state.currentAdmin.username.replace(/[^a-zA-Z]/g,"")+this.$store.state.currentAdmin.id+(new Date).getTime()+Math.floor(1e3*Math.random())+a,r=localStorage.getItem("defaultStoreType"),s=new FormData;s.append("file",e),s.append("originalName",e.name),s.append("key",n),s.append("relativePath",n),s.append("type","departmentPicture"),s.append("storeType",r),"local"===r?this.saveLocal(t,s):"qiniu"===r&&this.saveQiniu(t,s)},saveLocal:function(t,e){var a=this;this.$http.upload(this.$constant.baseURL+"/resource/upload",e,!0).then((function(e){if(!a.$common.isEmpty(e.data)){var n=e.data;a.$refs.md.$img2Url(t,n)}})).catch((function(t){a.$message({message:t.message,type:"error"})}))},saveQiniu:function(t,e){var a=this;this.$http.get(this.$constant.baseURL+"/qiniu/getUpToken",{key:e.get("key")},!0).then((function(n){a.$common.isEmpty(n.data)||(e.append("token",n.data),a.$http.uploadQiniu(a.$store.state.sysConfig.qiniuUrl,e).then((function(n){if(!a.$common.isEmpty(n.key)){var r=a.$store.state.sysConfig["qiniu.downloadUrl"]+n.key,s=e.get("file");a.$common.saveResource(a,"departmentPicture",r,s.size,s.type,s.name,"qiniu",!0),a.$refs.md.$img2Url(t,r)}})).catch((function(t){a.$message({message:t.message,type:"error"})})))})).catch((function(t){a.$message({message:t.message,type:"error"})}))},getCorporations:function(){var t=this;this.$http.get(this.$constant.baseURL+"/webInfo/listSortAndCorporations").then((function(e){t.$common.isEmpty(e.data)||(t.corporations=e.data.corporations,t.$common.isEmpty(t.id)||t.getDepartment())})).catch((function(e){t.$message({message:e.message,type:"error"})}))},getDepartment:function(){var t=this;this.$http.get(this.$constant.baseURL+"/admin/department/getDepartmentById",{id:this.id},!0).then((function(e){t.$common.isEmpty(e.data)||(t.department=e.data)})).catch((function(e){t.$message({message:e.message,type:"error"})}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){t?e.$common.isEmpty(e.id)?e.saveDepartment(e.department,"/department/saveDepartment"):(e.department.id=e.id,e.saveDepartment(e.department,"/admin/department/updateDepartment")):(console.log(t),e.$message({message:"请完善必填项！",type:"error"}))}))},resetForm:function(t){var e=this;this.$confirm("确认重置？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then((function(){e.$refs[t].resetFields(),e.$common.isEmpty(e.id)||e.getDepartment(),e.$message({message:"重置成功！",type:"success"})})).catch((function(){}))},deleteForm:function(t){var e=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then((function(){e.$http.get(e.$constant.baseURL+"/admin/department/deleteDepartment",{id:e.id},!0).then((function(t){e.$message({message:"删除成功！",type:"success"}),e.$router.push({path:"/departmentList"})})).catch((function(t){e.$message({message:t.message,type:"error"})}))})).catch((function(){}))},saveDepartment:function(t,e){var a=this;this.$confirm("确认保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",center:!0}).then((function(){console.log(t),a.$http.post(a.$constant.baseURL+e,t,!0).then((function(t){a.$message({message:"保存成功！",type:"success"}),a.$router.push({path:"/departmentList"})})).catch((function(t){a.$message({message:t.message,type:"error"})}))})).catch((function(){a.$message({type:"success",message:"已取消保存!"})}))}}}),o=s,i=(a("628a"),a("2877")),m=Object(i["a"])(o,n,r,!1,null,"507f16a3",null);e["default"]=m.exports}}]);